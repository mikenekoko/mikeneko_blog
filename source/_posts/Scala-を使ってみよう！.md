---
title: '[Scala]???を使ってみよう！'
date: 2019-01-07 15:39:26
tags: Scala
---

あけましておめでとうございます！みけです。
???ってみなさん使ったことありますか？私は今日まで全くしりませんでした。
とても便利なので是非使ってみてください。

## 経緯
公開されているいろんなサンプルプログラムを動かして遊んでいたら、こんな記述がありました。

```scala
else ???
```

なんだこれ？と思って調べてみたところ特に記事が見つからない。Googleで記号検索しづらいのなんとかなりませんかね。。
クエスチョンマーク3つ、はてなはてなはてな　とかで調べたんですけどでなかったですｗ

## 色々試してみる
とりあえず参考にしたコードと同じようなものを作成してみました。
渡された数字が偶数だった場合、2乗にして返す関数です。

```scala
def SquareEvenNumber(x: Int): Int = {
  if (x % 2 == 0) x * 2
}
```

これをコンパイルしてみると。。

```scala
Error:(2, 9) type mismatch;
found   : Unit
required: Int
if (x % 2 == 0) x * 2
```

型が一致してないのでエラーになりますね。Intで返ってくるのを想定しているのに、elseだった場合に何が返ってくるかわからない = Unit型になっています。
とりあえずtrueの処理の確認がしたいのにelseの処理を書かなきゃダメです。じゃあとりあえず5を返すようにしちゃいましょうか。

```scala
def SquareEvenNumber(x: Int): Int = {
  if (x % 2 == 0) x * 2
  else 5
}
```

これでtrueのテストはできます。ですが、これかなり危険ですよね。このまま忘れて本番反映してしまったら？elseのケースは全く考えていないので適当な5が返ってきてしまいます。これで障害が起きたら？
じゃあどうテストするんだよ！って時に `???` の出番です！

# ???の使いどころ！
ずばり、一部の実相を後回しにしたい時！です。
Scalaはコンパイラ言語なので綺麗なコードをかかないとエラーだらけで動きません。ちょっと動かしたいな～という時に役立ちます。
先ほどのコードを ??? に書き換えてみます。

```java
def SquareEvenNumber(x: Int): Int = {
  if (x % 2 == 0) x * 2
  else ???
}
```

これで動くようになりました。ちゃんとIntelliJ側で警告も出してくれるので、未実装なのが一目でわかりますね。

![image.png](https://qiita-image-store.s3.amazonaws.com/0/178351/a62403ee-1889-9d14-a158-c1fc78db0bca.png)

`偶数を渡した時、2倍にして返してくれるかどうか` がこの関数では主軸となり、elseの場合は正直どうでもいいのです。
そのどうでもいいelseのために仮のelseのコードを書いて～という事が非常に煩わしいため ??? を使うことで本質の部分のコードに集中できます。

## ???って結局何なの？
NotImplementedErrorです。要するに、未実装エラーです。
https://www.scala-lang.org/api/current/index.html#scala.Predef$@???:Nothing

「ここは未実装だよ～」とScala側に教えることで、とりあえず実装を後回しにしてもScala側に「あぁここはまだ未実装なのね。OK」と理解してもらえるようになります。
これ何故かコップ本に載ってないんですよね。調べたところ、Scala2.10から実装されたものらしいです。
参考：https://53ningen.com/predef/

自分はコードを書く時「満たしたいモノをとにかく雑に汚くてもいいから満たす。そのあとに、コードをキレイにしたり例外処理を考える」という手法で書いているのでこの ??? はとても便利です！
Scalaはきっちりコードを書ける分雑にいっきに書きたい自分とは結構相性が悪いですからね。。有効に使っていきたいです。

それではまた。