---
title: 強制的にfishシェルに切り替えるようにbashrcを変更する
date: 2019-01-28 00:21:26
tags: 
- fish
- bashrc
---
## 前置き
お疲れ様です！みけです。1月になってから何も特に開発してない気がします。
その理由の1つに、ターミナルの問題。何やってもバグだらけ。。。
MACならデフォルトのターミナルが優秀ですし、Iterm2を使えば間違いないという状況に対して
Windowsはこれ！っていうのが無くて一長一短なんですよね。そこでいまだに満足いくターミナルに出会えてなくて苦戦してました。

Cmderはかなり優秀なターミナルなのですが、日本語関係の扱いにかなり不安定感があり断念しました。
今はwslttyを使っています！動作も安定していて導入も簡単でオススメです。
問題はデフォルトのテーマがダサいくらいですかね？ｗ

## 本題
fishシェルを主に使っているのですが、ターミナルの環境を変えるたびにそのターミナルでログイン時にfishにリダイレクトさせて～…みたいな記述を書くのがめちゃくちゃ大変でした。
ものによっては設定の仕方がわからないものもあったり、tmusで画面分割したらbashに戻ってしまうので再度fishに入ったりと、超面倒！
ということで、bashrcに直接fishを強制させる記述を書きます。
tmuxに強制attachさせるやつの流用です。

```bash
if [ -z "$FISH" ] && [ "${FISH:-A}" = "${FISH-A}" ]; then
  export FISH=1
fi
if [ $((FISH)) != 0 ]; then
    case $- in
        *i*) exec fish;;
        *) return;;
    esac
fi
```

これをbashrcの後ろに記述してください。無ければ作成して下さい！

```bash
vi ~/.bashrc
```

## bashに戻りたい場合
何かと戻る事はあると思いますが、戻りたい時は以下です。

```bash
set -x FISH 0; bash
```

再度fishに戻りたい場合は通常通りにfishコマンドを打っても大丈夫ですが、2重起動になる可能性があるので以下で戻りましょう。

```bash
FISH=1 fish
```

エイリアスに登録してしまうのもオススメです。

## 再読み込み
設定したら、再読み込みしましょう。再起動でもOKです。

```bash
source ~/.bashrc
```

## 確認
ターミナルでbashにアクセスしてみてください。fishシェルが立ち上がればOK！
![キャプチャ.PNG](https://qiita-image-store.s3.amazonaws.com/0/178351/2fccec95-bee5-b030-caa4-99b5bcfc9eac.png)

何もしていないのにfishシェルが立ち上がりましたね。これでどんなターミナルでもfishに移動してくれるので、VSCode等からの呼び出しでもfishシェルが開くようになりました。便利！

それではまた。